<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>观看本地视频</title>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.2/flv.min.js"></script>  <!--   flv解析，采用B站开源代码   -->
<script>
    function videoPlay() {
        const my_file = document.getElementById('file').files[0];
        const my_url = URL.createObjectURL(my_file);
        const my_video = document.getElementById("video_id");
        if(my_file.name.search('.flv$')>0) {
            const flvPlayer = flvjs.createPlayer({
                type: 'flv',
                url: my_url
            });
            flvPlayer.attachMediaElement(my_video);
            flvPlayer.load();
            flvPlayer.play();
        }
        else {
            my_video.src = my_url;
        }
        my_video.setAttribute("width", my_video.height * my_video.videoWidth / my_video.videoHeight)
        // console.log(file);
    }
</script>
<h3 style="text-align: center;">观看本地视频</h3>
<h3  style="text-align: center;">仅支持mp4/flv格式</h3>
<hr color="#666666">
<video id="video_id" width="480" height="360" controls autoplay loop>你的浏览器不能支持HTML5视频</video>
<h3></h3>
<input type="file" id="file" onchange="videoPlay()" />
<script src="video_sync.js"></script>
</body>
</html>